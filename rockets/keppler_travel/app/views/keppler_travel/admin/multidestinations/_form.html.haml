= simple_form_for [:admin, :travel, @multidestination] do |f|
  .container
    .row
      .col-lg-2
        = link_to admin_travel_multidestinations_path, class: "", "data-position" => "bottom", "data-tooltip" => t("keppler.actions.back") do
          .arrow-back.btn.btn-default
            %i.fa.fa-angle-left
            = t('keppler.actions.back')

    .row
      .col-lg-12
        .box.slice-box
          .box-header.with-border
            %h3.box-title= t("keppler.modules.#{action_name.underscore}")
            .box-tools.pull-right
              %a.btn.btn-box-tool{"data-widget" => "collapse", :type => "button"}
                %i.fa.fa-minus
          .box-body
            %table.table.table-bordered
              %tbody
                .form-padding
                  -#.col-lg-12
                    = f.input :banner, as: :keppler_file, label: false, max_size: 500
                  .col-xs-12.col-md-12
                    .nav-tabs-custom
                      %ul.nav.nav-tabs
                        %li.active
                          %a{"data-toggle" => "tab", :href => "#spanish"} Español
                        %li
                          %a{"data-toggle" => "tab", :href => "#english"} Inglés
                        %li
                          %a{"data-toggle" => "tab", :href => "#portugues"} Portugués
                      .tab-content{style: 'padding:inherit!important;margin-bottom:10px;'}
                        // ESPAÑOL
                        #spanish.tab-pane.active
                          .col-xs-12.col-md-12
                            = f.simple_fields_for :title, OpenStruct.new(@multidestination.title) do |field|
                              = field.input :es, label: 'Titulo'
                          .col-xs-12.col-md-12
                            = f.simple_fields_for :subtitle, OpenStruct.new(@multidestination.subtitle) do |field|
                              = field.input :es, label: 'Subtitulo'
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :description, OpenStruct.new(@multidestination.description) do |field|
                              = field.input :es, label: 'Descripción', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :include, OpenStruct.new(@multidestination.include) do |field|
                              = field.input :es, label: 'Incluye', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :exclude, OpenStruct.new(@multidestination.exclude) do |field|
                              = field.input :es, label: 'No incluye', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :itinerary, OpenStruct.new(@multidestination.itinerary) do |field|
                              = field.input :es, label: 'Itinerario', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                        // INGLES
                        #english.tab-pane
                          .col-xs-12.col-md-12
                            = f.simple_fields_for :title, OpenStruct.new(@multidestination.title) do |field|
                              = field.input :en, label: 'Title'
                          .col-xs-12.col-md-12
                            = f.simple_fields_for :subtitle, OpenStruct.new(@multidestination.subtitle) do |field|
                              = field.input :en, label: 'Subtitulo'
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :description, OpenStruct.new(@multidestination.description) do |field|
                              = field.input :en, label: 'Description', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :include, OpenStruct.new(@multidestination.include) do |field|
                              = field.input :en, label: 'Include', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :exclude, OpenStruct.new(@multidestination.exclude) do |field|
                              = field.input :en, label: 'Exclude', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :itinerary, OpenStruct.new(@multidestination.itinerary) do |field|
                              = field.input :en, label: 'Itinenary', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                        // PORTUGUES
                        #portugues.tab-pane
                          .col-xs-12.col-md-12
                            = f.simple_fields_for :title, OpenStruct.new(@multidestination.title) do |field|
                              = field.input :pt, label: 'Titulo'
                          .col-xs-12.col-md-12
                            = f.simple_fields_for :subtitle, OpenStruct.new(@multidestination.subtitle) do |field|
                              = field.input :pt, label: 'Subtitulo'
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :description, OpenStruct.new(@multidestination.description) do |field|
                              = field.input :pt, label: 'Descrição', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :include, OpenStruct.new(@multidestination.include) do |field|
                              = field.input :pt, label: 'Inclui', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :exclude, OpenStruct.new(@multidestination.exclude) do |field|
                              = field.input :pt, label: 'Excluir', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
                          .col-xs-12.col-md-12.col-lg-6
                            = f.simple_fields_for :itinerary, OpenStruct.new(@multidestination.itinerary) do |field|
                              = field.input :pt, label: 'Itinerário', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }

                  .col-xs-12.col-lg-6
                    .col-xs-12.col-md-6
                      %label Destinos
                      %br.hidden-md
                        %select.selectpicker{"data-style" => "btn-primary", id: 'destinations_multidestinations', name: 'multidestination[destination_ids]', multiple: "multiple", style:'width: 100%;'}
                          - KepplerTravel::Destination.all.select{|destination| destination.lodgments.count.positive? }.each do |destination|
                            %option{ value: destination.id, selected: @multidestination.selected(destination.id)}= destination.custom_title[I18n.locale.to_s]
                      %br
                      %br
                    .col-xs-12.col-md-6
                      = f.input :quantity_days, label: 'Cantidad de Días', input_html: { min: 0 }
                  .col-xs-12.col-lg-6
                    .col-xs-12.col-md-6
                      = f.input :status, label: 'Habilitado?',as: :keppler_boolean
                      %br
                    .col-xs-12.col-md-6
                      = f.input :featured, label: '¿Destacado?',as: :keppler_boolean
                      %br



                  .col-xs-12
                    .col-xs-12.col-lg-6
                      %label Imagen de Portada - (Sólo una imagen)
                      = f.input :banner, as: :keppler_file, label: false, max_size: 800


                      -# %label Imagen de Portada - (Sólo una imagen)
                      -# %br
                      -# %br
                      -# = f.file_field :banner
                      -# #helper_que_busco2
                      -#   = files_exist(1, f.object.files, 'multidestinatio[banner][]')
                    .col-xs-12.col-lg-6
                      %label Imágenes de Galería - (Múltiples imágenes)
                      %br
                      %br
                      = f.file_field :files, multiple: true
                      #helper_que_busco
                        = files_exist(1, f.object.files, 'multidestination[files][]')
                    .col-xs-12
                      = f.input :position, as: :hidden
                    .col-xs-12
                      = f.input :deleted_at, as: :hidden
                  .col-xs-12
                    .pull-right
                      - if action_name == 'new'
                        = f.button :submit, 'Siguiente', name: '_save', class: 'btn-primary'
                      - else
                        = f.button :submit, 'Guardar', name: '_save', class: 'btn-primary'

%link{:href => "https://www.tutorialspoint.com/jquery/src/filer/css/jquery.filer.css", :rel => "stylesheet", :type => "text/css"}/
%link{:href => "https://www.tutorialspoint.com/jquery/src/filer/css/themes/jquery.filer-dragdropbox-theme.css", :rel => "stylesheet", :type => "text/css"}/
%script{:src => "https://www.tutorialspoint.com/jquery/src/filer/js/jquery.filer.min.js", :type => "text/javascript"}
%link{:href => "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/css/bootstrap-select.min.css", :rel => "stylesheet"}/
%script{:src => "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/js/bootstrap-select.min.js"}

:javascript

  collectImages("#multidestination_files", ".edit_multidestination", "multidestination[files_delete][]");

- if action_name == 'new'
  :javascript
    validateMultidestination('#new_multidestination');
- else
  :javascript
    var multidestination_id = #{raw @multidestination.id};
    validateMultidestination(`#edit_multidestination_${multidestination_id}`);

:scss
  label.error-class{color: #e60707 !important;}
