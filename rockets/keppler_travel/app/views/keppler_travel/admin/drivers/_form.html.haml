= simple_form_for @user, url: main_app.admin_users_path do |f|
  .container
    .row
      .col-lg-2
        = link_to admin_travel_drivers_path, class: "", "data-position" => "bottom", "data-tooltip" => t("keppler.actions.back") do
          .arrow-back.btn.btn-default
            %i.fa.fa-angle-left
            = t('keppler.actions.back')
    .row
      .col-lg-12
        .box.slice-box
          .box-header.with-border
            %h3.box-title
              = t("keppler.modules.#{controller_path.underscore}")
              = ' - '
              = t("keppler.modules.#{action_name.underscore}")
            .box-tools.pull-right
              %a.btn.btn-box-tool{"data-widget" => "collapse", :type => "button"}
                %i.fa.fa-minus
    .row
      .col-md-6
        .box.slice-box
          .box-header.with-border
            %h3.box-title Avatar
          .box-body.box-profile
            = f.input :avatar, as: :keppler_file, label: false

      .col-md-6
        .box.slice-box
          .box-header.with-border
            %h3.box-title= @user.name || 'User'

          .box-body
            %table.table.table-bordered
              %tbody
                .form-padding
                  .row
                    .col-lg-6
                      = f.input :name, label: t('simple_form.labels.defaults.name'), placeholder: 'Nombre', input_html: {class: 'form-control'}, required: true
                    .col-lg-6
                      = f.input :email, label: t('simple_form.labels.defaults.email'), placeholder: 'Correo', input_html: {class: 'form-control'}, required: true

                  .row
                    .col-lg-6
                      = f.input :phone, label: t('simple_form.labels.defaults.phone'), placeholder: 'Teléfono', input_html: {class: 'form-control'}, required: true
                    .col-lg-6
                      = f.input :dni, label: t('simple_form.labels.defaults.dni'), placeholder: 'Identificación', input_html: {class: 'form-control'}, required: true

                  .row
                    .col-xs-12
                      = f.input :role_ids, collection: [['Driver', 5]], label: 'Rol', include_blank: false
                  .row
                    .col-lg-6
                      = f.input :password, label: t('simple_form.labels.defaults.password'), placeholder: 'Password', input_html: {class: 'form-control'}, required: true
                    .col-lg-6
                      = f.input :password_confirmation, label: t('simple_form.labels.defaults.password_confirmation'), placeholder: 'Password Confirmation', input_html: {class: 'form-control'}, required: true
                  = f.simple_fields_for [:admin, :travel, @driver] do |x|
                    .row
                      .col-xs-12
                        = x.input :timetrack, input_html: {type: 'hidden', value: 'Driver TimeTrack'}, label: false
                  .row
                    .col-lg-12
                      .pull-right
                        = f.button :submit, t('keppler.actions.save'), name: '_save', class: 'btn-primary'


- if action_name == 'new'
  :javascript
    validateDriver('#new_user');
- else
  :javascript
    var user_id = #{raw @user.id};
    validateDriver(`#edit_user_${user_id}`);
