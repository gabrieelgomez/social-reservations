= simple_form_for [:admin, :travel, @circuit] do |f|
	.container
		.row
			.col-lg-2
				= link_to admin_travel_circuits_path, class: "", "data-position" => "bottom", "data-tooltip" => t("keppler.actions.back") do
					.arrow-back.btn.btn-default
						%i.fa.fa-angle-left
						= t('keppler.actions.back')

		.row
			.col-lg-12
				.box.slice-box
					.box-header.with-border
						%h3.box-title= t("keppler.modules.#{action_name.underscore}")
						.box-tools.pull-right
							%a.btn.btn-box-tool{"data-widget" => "collapse", :type => "button"}
								%i.fa.fa-minus
					.box-body
						%table.table.table-bordered
							%tbody
								.form-padding
									.col-xs-12
										.nav-tabs-custom
											%ul.nav.nav-tabs
												%li.active
													%a{"data-toggle" => "tab", :href => "#spanish"} Español
												%li
													%a{"data-toggle" => "tab", :href => "#english"} Inglés
												%li
													%a{"data-toggle" => "tab", :href => "#portugues"} Portugués
											.tab-content{style: 'padding:inherit!important;margin-bottom:10px;'}

												// ESPAÑOL
												#spanish.tab-pane.active
													.col-xs-12
														= f.simple_fields_for :title, OpenStruct.new(@circuit.title) do |field|
															= field.input :es, label: 'Titulo'
													.col-xs-6
														= f.simple_fields_for :description, OpenStruct.new(@circuit.description) do |field|
															= field.input :es, label: 'Descripción', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
													.col-xs-6
														= f.simple_fields_for :include, OpenStruct.new(@circuit.include) do |field|
															= field.input :es, label: 'Incluye', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }

													.col-xs-6
														= f.simple_fields_for :exclude, OpenStruct.new(@circuit.exclude) do |field|
															= field.input :es, label: 'No incluye', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }

												// INGLES
												#english.tab-pane
													.col-xs-12
														= f.simple_fields_for :title, OpenStruct.new(@circuit.title) do |field|
															= field.input :en, label: 'Title'
													.col-xs-6
														= f.simple_fields_for :description, OpenStruct.new(@circuit.description) do |field|
															= field.input :en, label: 'Description', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
													.col-xs-6
														= f.simple_fields_for :include, OpenStruct.new(@circuit.include) do |field|
															= field.input :en, label: 'Include', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }

													.col-xs-6
														= f.simple_fields_for :exclude, OpenStruct.new(@circuit.exclude) do |field|
															= field.input :en, label: 'Exclude', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }

												// PORTUGUES
												#portugues.tab-pane
													.col-xs-12
														= f.simple_fields_for :title, OpenStruct.new(@circuit.title) do |field|
															= field.input :pt, label: 'Titulo'
													.col-xs-6
														= f.simple_fields_for :description, OpenStruct.new(@circuit.description) do |field|
															= field.input :pt, label: 'Descrição', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }
													.col-xs-6
														= f.simple_fields_for :include, OpenStruct.new(@circuit.include) do |field|
															= field.input :pt, label: 'Inclui', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }

													.col-xs-6
														= f.simple_fields_for :exclude, OpenStruct.new(@circuit.exclude) do |field|
															= field.input :pt, label: 'Excluir', as: :ckeditor, input_html: { ckeditor: { toolbar: 'mini'} }

										.col-xs-6.col-lg-2
											= f.input :quantity_days, label: 'Cantidad de Días', input_html: { min: 0 }
										.col-xs-6.col-lg-6
											%label Destinos
											%select.selectpicker{"data-style" => "btn-primary", id: 'destinations_circuits', name: 'circuit[destination_ids]', multiple: "multiple"}
												- KepplerTravel::Destination.all.select{|destination| destination.lodgments.count.positive? }.each do |destination|
													%option{ value: destination.id, selected: @circuit.selected(destination.id)}= destination.custom_title[I18n.locale.to_s]

									.col-xs-12.col-md-12
										%label Galería de Imágenes
										-# %input#circuit_files{:multiple => "", :name => "circuit[files][]", :type => "file"}
										= f.file_field :files, multiple: true
									#helper_que_busco
										= files_exist(1, f.object.files, 'circuit[files][]')

										.col-xs-12
											= f.input :position, as: :hidden
										.col-xs-12
											= f.input :deleted_at, as: :hidden
									.col-xs-12
										.pull-right
											= f.button :submit, 'Siguiente', name: '_save', class: 'btn-primary'
											-# = f.button :submit, t('keppler.actions.save_and_add_another'), name: '_add_other'


%link{:href => "https://www.tutorialspoint.com/jquery/src/filer/css/jquery.filer.css", :rel => "stylesheet", :type => "text/css"}/
%link{:href => "https://www.tutorialspoint.com/jquery/src/filer/css/themes/jquery.filer-dragdropbox-theme.css", :rel => "stylesheet", :type => "text/css"}/
%script{:src => "https://www.tutorialspoint.com/jquery/src/filer/js/jquery.filer.min.js", :type => "text/javascript"}
%link{:href => "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/css/bootstrap-select.min.css", :rel => "stylesheet"}/
%script{:src => "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/js/bootstrap-select.min.js"}

:javascript

	$("#destinations_circuits").change(function() {

	});

	collectImages("#circuit_files", ".edit_circuit", "circuit[files_delete][]");

- if action_name == 'new'
	:javascript
		validateCircuit('#new_circuit');
- else
	:javascript
		var circuit_id = #{raw @circuit.id};
		validateCircuit(`#edit_circuit_${circuit_id}`);

:scss
	label.error-class{color: #e60707 !important;}
