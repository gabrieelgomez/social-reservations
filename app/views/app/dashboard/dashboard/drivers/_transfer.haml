.container-fluid
  .row
    .col-12
      .card
        / 
        .card-header
          %h4.card-title Órdenes de Reserva
          -#%p.card-category Lorem ipsum dolor sit amet consectetur adipisicing elit.
        .card-body
          .table-responsive
            %table.table.table-hover.table-striped
              %thead
                %th Estatus
                %th N° Orden
                %th N° Factura
                %th Estatus
                %th Vehiculo
                %th Origen
                %th Destino
                %th Responsable
                %th Pasajeros
                %th Cant. Adultos
                %th Cant. Niños
              %tbody
              -#- @orders.map(&:reservation).each do |reservation|
                %tr
                  - unless reservation.order.status.eql?('complete')
                    = simple_form_for reservation.order, url: update_order_path, method: :post do |f|
                      %td
                        %input{name: 'reservation_id', value: reservation.id, type: 'hidden'}
                        %input{name: 'order_id', value: reservation.order.id, type: 'hidden'}
                        %label.switch
                          %input#check_driver{type: "checkbox"}/
                          %span.slider.round
                  - else
                    %td
                      %span.status.available Completado
                  %td= reservation.id
                  %td= reservation.invoice.token
                  %td{style:"text-align: center;"}
                    %span.label{class: reservation.invoice.status_class?}= reservation.invoice.status

                  %td= reservation.reservationable.title[@lang]
                  %td= truncate(reservation.origin, length: 25)
                  %td= truncate(reservation.arrival, length: 25)
                  %td= reservation.user.name.titleize
                  %td= reservation.travellers.count
                  %td= reservation.quantity_adults
                  %td= reservation.quantity_kids



-#%section.content-header
  %h1
    Órdenes de Reserva
    -#%small Traslados
-#%section.content
  .row
    .col-xs-12
      .box
        .box-header
          %h3.box-title Traslados
          .box-tools
            .input-group.input-group-sm{style: "width: 150px;"}
              %input.form-control.pull-right{name: "table_search", placeholder: "Buscar", type: "text"}/
              .input-group-btn
                %button.btn.btn-default{type: "submit"}
                  %i.fa.fa-search
        .box-body.table-responsive.no-padding
          %table.table.table-hover
            %tbody
              %tr.items-orders
                %th Estatus
                %th N° Orden
                %th N° Factura
                %th Estatus
                %th Vehiculo
                %th Origen
                %th Destino
                %th Responsable
                %th Pasajeros
                %th Cant. Adultos
                %th Cant. Niños

              - @orders.map(&:reservation).each do |reservation|
                %tr
                  - unless reservation.order.status.eql?('complete')
                    = simple_form_for reservation.order, url: update_order_path, method: :post do |f|
                      %td
                        %input{name: 'reservation_id', value: reservation.id, type: 'hidden'}
                        %input{name: 'order_id', value: reservation.order.id, type: 'hidden'}
                        %label.switch
                          %input#check_driver{type: "checkbox"}/
                          %span.slider.round
                  - else
                    %td
                      %span.status.available Completado
                  %td= reservation.id
                  %td= reservation.invoice.token
                  %td{style:"text-align: center;"}
                    %span.label{class: reservation.invoice.status_class?}= reservation.invoice.status

                  %td= reservation.reservationable.title[@lang]
                  %td= truncate(reservation.origin, length: 25)
                  %td= truncate(reservation.arrival, length: 25)
                  %td= reservation.user.name.titleize
                  %td= reservation.travellers.count
                  %td= reservation.quantity_adults
                  %td= reservation.quantity_kids

%script{src: "https://unpkg.com/sweetalert2@7.19.3/dist/sweetalert2.all.js"}
:javascript

  $("#check_driver").on( 'change', function() {
    swal({
      title: '¿Estás seguro?',
      text: "Esta acción no se puede revertir",
      type: 'warning',
      showCancelButton: true,
      confirmButtonText: '¡Si!, confirmar el traslado como completado',
      cancelButtonText: '¡No!, regresar',
      reverseButtons: true
    }).then((result) => {
      if (result.value) {
        $('form').submit();
        swal({
          type: 'warning',
          title: 'Tu solicitud está siendo procesada...',
          text: 'Espere un momento...',
          timer: 300000,
          onOpen: () => {
            swal.showLoading()
          }
        })
      } else if (
        // Read more about handling dismissals
        result.dismiss === swal.DismissReason.cancel
      ) {
        $("#check_driver").attr('checked', false);
      }
    })
  });

:javascript
  var notice = "#{notice}";

  if (notice == 'success'){
   swal({
    type: 'success',
    title: '¡Listo!',
    text: '¡Cambios guardados exitosamente!'
   })
  }

:scss
  .status{
    display: inline;
    padding: .2em .6em .3em;
    font-size: 75%;
    font-weight: 700;
    line-height: 1;
    color: #fff;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: .25em;

  }

  .available{
   background-color: #5cb85c;
  }

  .not-available{
     background-color: #d9534f;
  }

  .switch {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 20px;
  }

  .switch input {
  opacity: 0;
  width: 0;
  height: 0;
  }

  .slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
  }

  .slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 1px;
    bottom: 0px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
  }

  input:checked + .slider {
  background-color: #2196F3;
  }

  input:focus + .slider {
  box-shadow: 0 0 1px #2196F3;
  }

  input:checked + .slider:before {
  -webkit-transform: translateX(18px);
  -ms-transform: translateX(18px);
  transform: translateX(18px);
  }

  /* Rounded sliders */
  .slider.round {
  border-radius: 34px;
  }

  .slider.round:before {
  border-radius: 50%;
  }
